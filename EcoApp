<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EnergyWatch - Complete Energy Monitoring</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary-green: #10b981;
            --dark-green: #059669;
            --light-green: #d1fae5;
            --primary-blue: #0ea5e9;
            --bg-white: #ffffff;
            --bg-light: #f8fafc;
            --text-dark: #1e293b;
            --text-gray: #64748b;
            --warning-yellow: #fbbf24;
            --warning-red: #ef4444;
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.15);
        }

        [data-theme="dark"] {
            --bg-white: #1e293b;
            --bg-light: #0f172a;
            --text-dark: #f1f5f9;
            --text-gray: #cbd5e1;
            --light-green: #064e3b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--bg-light) 0%, #e8f5e9 100%);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        [data-theme="dark"] body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-md);
            z-index: 1000;
        }

        [data-theme="dark"] nav { background: rgba(30, 41, 59, 0.95); }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--primary-green);
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active {
            color: var(--primary-green);
        }

        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-light);
            border: 2px solid var(--primary-green);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--text-dark);
            border-radius: 3px;
        }

        /* Pages */
        .page {
            min-height: 100vh;
            padding: 120px 2rem 60px;
            display: none;
        }

        .page.active { display: block; }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .page-subtitle {
            font-size: 1.1rem;
            color: var(--text-gray);
        }

        /* Cards */
        .card, .info-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
            margin-bottom: 2rem;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        /* Alert */
        .alert {
            background: #fef3c7;
            border-left: 4px solid var(--warning-yellow);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        /* Live Monitor Specific */
        .total-card {
            background: linear-gradient(135deg, var(--primary-green), var(--dark-green));
            color: white;
            border-radius: 20px;
            padding: 2.5rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            margin-bottom: 3rem;
        }

        .total-value {
            font-size: 3.5rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
        }

        .gauges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .gauge-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--bg-light);
            transition: all 0.3s ease;
        }

        .gauge-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-green);
        }

        .gauge-svg {
            width: 100%;
            height: auto;
        }

        .gauge-bg {
            fill: none;
            stroke: #e5e7eb;
            stroke-width: 12;
            stroke-linecap: round;
        }

        .gauge-fill {
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.8s ease;
        }

        .gauge-value-text {
            font-size: 32px;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            fill: var(--text-dark);
        }

        .gauge-unit-text {
            font-size: 14px;
            fill: var(--text-gray);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary-green);
            box-shadow: 0 0 10px var(--primary-green);
            animation: blink 2s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        .chart-container {
            position: relative;
            height: 350px;
            margin-top: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary-green), var(--dark-green));
            color: white;
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }

        .stat-card:nth-child(2) {
            background: linear-gradient(135deg, var(--primary-blue), #0284c7);
        }

        .stat-card:nth-child(3) {
            background: linear-gradient(135deg, var(--warning-yellow), #f59e0b);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--text-dark), #0f172a);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .menu-toggle { display: flex; }
            
            .nav-links {
                position: fixed;
                top: 70px;
                right: -100%;
                flex-direction: column;
                background: var(--bg-white);
                width: 280px;
                padding: 2rem;
                box-shadow: var(--shadow-lg);
                transition: right 0.4s ease;
                height: calc(100vh - 70px);
            }

            .nav-links.active { right: 0; }
            
            .page-title { font-size: 2rem; }
            .total-value { font-size: 2.5rem; }
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">‚ö°</div>
                <span>EnergyWatch</span>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#intro" class="nav-link active" data-page="intro">About</a></li>
                <li><a href="#monitor" class="nav-link" data-page="monitor">Live Monitor</a></li>
                <li><a href="#report" class="nav-link" data-page="report">Report</a></li>
                <li><a href="#help" class="nav-link" data-page="help">Help</a></li>
            </ul>
            <div style="display: flex; gap: 1rem; align-items: center;">
                <button class="theme-toggle" id="themeToggle">
                    <span id="themeIcon">üåô</span>
                </button>
                <div class="menu-toggle" id="menuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page 1: Introduction -->
    <div id="intro" class="page active">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Idle Energy Consumption Awareness</h1>
                <p class="page-subtitle">Understanding vampire power and reducing energy waste</p>
            </div>

            <div class="alert">
                <strong>‚ö†Ô∏è Did You Know?</strong> Vampire power can account for 5-10% of your total household electricity usage, costing ‚Çπ500-1500 extra per year!
            </div>

            <div class="info-section">
                <h2 style="font-size: 1.75rem; margin-bottom: 1rem;">What is Idle Energy Consumption?</h2>
                <p style="color: var(--text-gray); margin-bottom: 2rem;">
                    Idle energy consumption, or "vampire power," refers to electricity consumed by devices when plugged in but not actively in use. These devices continuously draw power in standby mode.
                </p>

                <div class="grid-2" style="gap: 1rem;">
                    <div style="padding: 1rem; background: var(--light-green); border-radius: 8px;">
                        <h3>üì∫ Standby Devices</h3>
                        <p>TVs, set-top boxes, gaming consoles</p>
                    </div>
                    <div style="padding: 1rem; background: var(--light-green); border-radius: 8px;">
                        <h3>üîå Chargers</h3>
                        <p>Phone, laptop chargers left plugged in</p>
                    </div>
                    <div style="padding: 1rem; background: var(--light-green); border-radius: 8px;">
                        <h3>üì° Network Devices</h3>
                        <p>Wi-Fi routers running 24/7</p>
                    </div>
                    <div style="padding: 1rem; background: var(--light-green); border-radius: 8px;">
                        <h3>‚ùÑÔ∏è Appliances</h3>
                        <p>AC, microwave, washing machine</p>
                    </div>
                </div>
            </div>

            <h2 style="font-size: 2rem; margin: 3rem 0 2rem; text-align: center;">Practical Solutions</h2>
            
            <div class="grid-2">
                <div class="card">
                    <h3 style="color: var(--primary-green); margin-bottom: 1rem;">üî¥ Switch Off Completely</h3>
                    <p>Turn off devices at the power outlet when not in use. Don't rely on standby mode.</p>
                </div>
                <div class="card">
                    <h3 style="color: var(--primary-blue); margin-bottom: 1rem;">üîå Use Smart Plugs</h3>
                    <p>Install smart plugs or power strips to control multiple devices easily.</p>
                </div>
                <div class="card">
                    <h3 style="color: var(--warning-yellow); margin-bottom: 1rem;">‚≠ê Energy-Efficient Appliances</h3>
                    <p>Invest in BEE 5-star rated appliances that consume less standby power.</p>
                </div>
                <div class="card">
                    <h3 style="color: var(--warning-red); margin-bottom: 1rem;">üß† Raise Awareness</h3>
                    <p>Educate family members about phantom loads and energy conservation.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 2: Live Monitor -->
    <div id="monitor" class="page">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Real-Time Vampire Energy Monitor</h1>
                <p class="page-subtitle">Live tracking of idle power consumption</p>
            </div>

            <div class="total-card">
                <div style="font-size: 1.1rem; opacity: 0.9; margin-bottom: 1rem;">TOTAL VAMPIRE POWER</div>
                <div class="total-value" id="totalWatts">--</div>
                <div style="font-size: 1.5rem; opacity: 0.9;">Watts</div>
                <div style="font-size: 0.95rem; opacity: 0.8; margin-top: 1rem;">‚ö° Updating every 3 seconds</div>
            </div>

            <div class="info-section">
                <h2 style="font-size: 1.75rem; margin-bottom: 1.5rem;">üîå Live Appliance Monitors</h2>
                <div class="gauges-grid" id="gaugesContainer"></div>
            </div>

            <div class="info-section">
                <h2 style="font-size: 1.75rem; margin-bottom: 1.5rem;">üìà Power Consumption Trend</h2>
                <div class="chart-container">
                    <canvas id="liveChart"></canvas>
                </div>
            </div>

            <div class="info-section">
                <h2 style="font-size: 1.75rem; margin-bottom: 1.5rem;">üìä Cost Impact</h2>
                <div class="grid-3">
                    <div class="stat-card">
                        <div style="opacity: 0.9; margin-bottom: 0.5rem;">Daily Waste</div>
                        <div class="stat-value" id="dailyKwh">--</div>
                        <div style="margin-top: 0.5rem;">kWh</div>
                        <div style="margin-top: 0.5rem; opacity: 0.9;">Cost: <strong id="dailyCost">--</strong></div>
                    </div>
                    <div class="stat-card">
                        <div style="opacity: 0.9; margin-bottom: 0.5rem;">Monthly Waste</div>
                        <div class="stat-value" id="monthlyKwh">--</div>
                        <div style="margin-top: 0.5rem;">kWh</div>
                        <div style="margin-top: 0.5rem; opacity: 0.9;">Cost: <strong id="monthlyCost">--</strong></div>
                    </div>
                    <div class="stat-card">
                        <div style="opacity: 0.9; margin-bottom: 0.5rem;">Yearly Waste</div>
                        <div class="stat-value" id="yearlyKwh">--</div>
                        <div style="margin-top: 0.5rem;">kWh</div>
                        <div style="margin-top: 0.5rem; opacity: 0.9;">Cost: <strong id="yearlyCost">--</strong></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 3: Report -->
    <div id="report" class="page">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Energy Consumption Analysis</h1>
                <p class="page-subtitle">Overview of your energy usage and savings potential</p>
            </div>

            <div class="grid-2">
                <div class="stat-card">
                    <div class="stat-value">350</div>
                    <div style="margin-top: 0.5rem;">Monthly Units (kWh)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">25</div>
                    <div style="margin-top: 0.5rem;">Idle Energy Wasted</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">‚Çπ180</div>
                    <div style="margin-top: 0.5rem;">Monthly Cost Loss</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">15kg</div>
                    <div style="margin-top: 0.5rem;">Monthly CO‚ÇÇ Emissions</div>
                </div>
            </div>

            <div class="info-section" style="margin-top: 2rem;">
                <h2 style="font-size: 1.75rem; margin-bottom: 1.5rem;">üìä Annual Impact</h2>
                <div class="grid-3">
                    <div style="padding: 1.5rem; background: var(--light-green); border-radius: 12px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: var(--primary-green); margin-bottom: 0.5rem;">300 kWh</div>
                        <div style="color: var(--text-gray);">Idle Energy Wasted</div>
                    </div>
                    <div style="padding: 1.5rem; background: #fef3c7; border-radius: 12px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #f59e0b; margin-bottom: 0.5rem;">‚Çπ2,160</div>
                        <div style="color: var(--text-gray);">Annual Cost Wasted</div>
                    </div>
                    <div style="padding: 1.5rem; background: #fee2e2; border-radius: 12px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: var(--warning-red); margin-bottom: 0.5rem;">180 kg</div>
                        <div style="color: var(--text-gray);">Annual CO‚ÇÇ Emissions</div>
                    </div>
                </div>
            </div>

            <div class="info-section" style="background: linear-gradient(135deg, var(--primary-green), var(--dark-green)); color: white;">
                <h2 style="font-size: 1.75rem; margin-bottom: 1.5rem;">üí° Your Savings Potential</h2>
                <div class="grid-2">
                    <div>
                        <h3 style="font-size: 1.2rem; margin-bottom: 1rem;">By Reducing 50%</h3>
                        <ul style="line-height: 2; opacity: 0.9;">
                            <li>Save 150 kWh annually</li>
                            <li>Reduce bills by ‚Çπ1,080/year</li>
                            <li>Cut CO‚ÇÇ by 90 kg</li>
                        </ul>
                    </div>
                    <div>
                        <h3 style="font-size: 1.2rem; margin-bottom: 1rem;">By Eliminating 100%</h3>
                        <ul style="line-height: 2; opacity: 0.9;">
                            <li>Save 300 kWh annually</li>
                            <li>Reduce bills by ‚Çπ2,160/year</li>
                            <li>Cut CO‚ÇÇ by 180 kg</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 4: Help -->
    <div id="help" class="page">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Electricity Help & Support</h1>
                <p class="page-subtitle">Important helpline numbers for India</p>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3 style="color: var(--primary-green); margin-bottom: 1rem;">üìû National Power Helpline</h3>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--primary-green); font-family: 'Space Mono', monospace; margin: 1rem 0;">1912</div>
                    <p style="color: var(--text-gray);">24/7 toll-free helpline for electricity-related complaints and emergencies across India.</p>
                </div>

                <div class="card">
                    <h3 style="color: var(--primary-blue); margin-bottom: 1rem;">‚ö° Energy Efficiency Bureau</h3>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--primary-blue); font-family: 'Space Mono', monospace; margin: 1rem 0;">011-2617-1384</div>
                    <p style="color: var(--text-gray);">BEE helpline for energy-saving appliances, star ratings, and efficiency programs.</p>
                </div>

                <div class="card">
                    <h3 style="color: var(--warning-yellow); margin-bottom: 1rem;">üè¢ State Electricity Boards</h3>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--warning-yellow); font-family: 'Space Mono', monospace; margin: 1rem 0;">Varies</div>
                    <p style="color: var(--text-gray);">Contact your local board for billing, connections, and regional support.</p>
                </div>

                <div class="card">
                    <h3 style="color: var(--warning-red); margin-bottom: 1rem;">üö® Emergency Services</h3>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--warning-red); font-family: 'Space Mono', monospace; margin: 1rem 0;">112</div>
                    <p style="color: var(--text-gray);">National emergency number for electrical hazards and life-threatening situations.</p>
                </div>
            </div>

            <div class="info-section">
                <h2 style="font-size: 1.75rem; margin-bottom: 1.5rem;">üìã State-wise Contacts</h2>
                <div class="grid-3" style="gap: 1rem;">
                    <div style="padding: 1rem; background: var(--bg-light); border-radius: 8px;">
                        <strong>Delhi:</strong> BSES: 19123
                    </div>
                    <div style="padding: 1rem; background: var(--bg-light); border-radius: 8px;">
                        <strong>Maharashtra:</strong> MSEDCL: 1912
                    </div>
                    <div style="padding: 1rem; background: var(--bg-light); border-radius: 8px;">
                        <strong>Karnataka:</strong> BESCOM: 1912
                    </div>
                    <div style="padding: 1rem; background: var(--bg-light); border-radius: 8px;">
                        <strong>Tamil Nadu:</strong> TANGEDCO: 94987-94987
                    </div>
                    <div style="padding: 1rem; background: var(--bg-light); border-radius: 8px;">
                        <strong>Gujarat:</strong> DGVCL: 1912
                    </div>
                    <div style="padding: 1rem; background: var(--bg-light); border-radius: 8px;">
                        <strong>Uttar Pradesh:</strong> UPPCL: 1912
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div style="max-width: 1400px; margin: 0 auto;">
            <div style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">‚ö° EnergyWatch</div>
            <p style="opacity: 0.8;">Empowering households to reduce idle energy consumption</p>
            <p style="margin-top: 1.5rem; font-size: 0.85rem; opacity: 0.7;">
                ¬© 2026 EnergyWatch. Educational purposes. Data: BEE India, Ministry of Power.
            </p>
        </div>
    </footer>

    <script>
        // Appliance Configuration
        const APPLIANCES = {
            tv: { name: 'Television', icon: 'üì∫', minWatts: 8, maxWatts: 12, avgWatts: 10, variance: 1.5, color: '#10b981' },
            router: { name: 'Wi-Fi Router', icon: 'üì°', minWatts: 6, maxWatts: 10, avgWatts: 8, variance: 1, color: '#0ea5e9' },
            chargers: { name: 'Chargers (3x)', icon: 'üîå', minWatts: 1.5, maxWatts: 6, avgWatts: 4, variance: 1.2, color: '#fbbf24' },
            ac: { name: 'Air Conditioner', icon: '‚ùÑÔ∏è', minWatts: 3, maxWatts: 5, avgWatts: 4, variance: 0.8, color: '#ef4444' },
            microwave: { name: 'Microwave', icon: 'üç≥', minWatts: 3, maxWatts: 4, avgWatts: 3.5, variance: 0.5, color: '#8b5cf6' },
            washing: { name: 'Washing Machine', icon: 'üß∫', minWatts: 2, maxWatts: 4, avgWatts: 3, variance: 0.7, color: '#ec4899' }
        };

        let currentReadings = {};
        let historicalData = {};
        let startTime = Date.now();
        let liveChart = null;
        let updateInterval = null;

        Object.keys(APPLIANCES).forEach(id => {
            currentReadings[id] = APPLIANCES[id].avgWatts;
            historicalData[id] = [];
        });

        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const html = document.documentElement;

        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        themeIcon.textContent = currentTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';

        themeToggle.addEventListener('click', () => {
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeIcon.textContent = newTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        });

        // Navigation
        const navLinks = document.querySelectorAll('.nav-link');
        const pages = document.querySelectorAll('.page');
        const menuToggle = document.getElementById('menuToggle');
        const navLinksContainer = document.getElementById('navLinks');

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetPage = link.getAttribute('data-page');
                
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                pages.forEach(page => {
                    page.classList.remove('active');
                    if (page.id === targetPage) {
                        page.classList.add('active');
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        
                        if (targetPage === 'monitor') {
                            setTimeout(initializeLiveMonitor, 300);
                        }
                    }
                });

                navLinksContainer.classList.remove('active');
            });
        });

        menuToggle.addEventListener('click', () => {
            navLinksContainer.classList.toggle('active');
        });

        // Live Monitor Functions
        function generateRealisticReading(appliance, timeFactor = 0) {
            const base = appliance.avgWatts;
            const variation = Math.sin(timeFactor * 2 * Math.PI) * appliance.variance * 0.3;
            const noise = (Math.random() - 0.5) * appliance.variance * 0.4;
            const spike = Math.random() < 0.05 ? Math.random() * appliance.variance * 2 : 0;
            
            let reading = base + variation + noise + spike;
            reading = Math.max(appliance.minWatts, Math.min(appliance.maxWatts, reading));
            return Math.round(reading * 100) / 100;
        }

        function createGaugeSVG(id, appliance, value) {
            const percentage = ((value - appliance.minWatts) / (appliance.maxWatts - appliance.minWatts)) * 100;
            const circumference = 2 * Math.PI * 85;
            const dashOffset = circumference - (circumference * percentage) / 100;
            
            return `
                <svg viewBox="0 0 200 130" class="gauge-svg">
                    <path class="gauge-bg" d="M 30 100 A 70 70 0 0 1 170 100" 
                          stroke-dasharray="${circumference * 0.75}" stroke-dashoffset="0"/>
                    <path class="gauge-fill" d="M 30 100 A 70 70 0 0 1 170 100" 
                          stroke="${appliance.color}"
                          stroke-dasharray="${circumference * 0.75}" 
                          stroke-dashoffset="${dashOffset * 0.75}"/>
                    <circle fill="var(--bg-white)" cx="100" cy="100" r="55"/>
                    <text class="gauge-value-text" x="100" y="95" text-anchor="middle">${value.toFixed(1)}</text>
                    <text class="gauge-unit-text" x="100" y="115" text-anchor="middle">watts</text>
                </svg>
            `;
        }

        function createGaugeCard(id, appliance) {
            return `
                <div class="gauge-card" id="gauge-${id}">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <div style="font-size: 1.1rem; font-weight: 600;">
                            <span style="font-size: 1.5rem;">${appliance.icon}</span> ${appliance.name}
                        </div>
                        <div class="status-indicator"></div>
                    </div>
                    <div style="max-width: 200px; margin: 0 auto 1rem;">
                        ${createGaugeSVG(id, appliance, currentReadings[id])}
                    </div>
                    <div style="text-align: center; font-size: 0.85rem; color: var(--text-gray);">
                        Range: ${appliance.minWatts}W - ${appliance.maxWatts}W
                    </div>
                </div>
            `;
        }

        function initializeGauges() {
            const container = document.getElementById('gaugesContainer');
            if (!container) return;
            container.innerHTML = Object.keys(APPLIANCES).map(id => createGaugeCard(id, APPLIANCES[id])).join('');
        }

        function updateGauge(id, value) {
            const gaugeCard = document.getElementById(`gauge-${id}`);
            if (!gaugeCard) return;
            const svgContainer = gaugeCard.querySelector('div[style*="max-width"]');
            svgContainer.innerHTML = createGaugeSVG(id, APPLIANCES[id], value);
        }

        function updateReadings() {
            const elapsed = (Date.now() - startTime) / 1000;
            const timeFactor = (elapsed % 3600) / 3600;
            let total = 0;
            
            Object.keys(APPLIANCES).forEach(id => {
                const newValue = generateRealisticReading(APPLIANCES[id], timeFactor);
                currentReadings[id] = newValue;
                total += newValue;
                updateGauge(id, newValue);
                
                historicalData[id].push({ timestamp: new Date(), value: newValue });
                if (historicalData[id].length > 60) historicalData[id].shift();
            });
            
            const totalEl = document.getElementById('totalWatts');
            if (totalEl) totalEl.textContent = total.toFixed(2);
            
            updateStats(total);
            updateLiveChart();
        }

        function updateStats(totalWatts) {
            const RATE = 7.2;
            const dailyKwh = (totalWatts * 24) / 1000;
            const dailyCost = dailyKwh * RATE;
            
            const els = {
                dailyKwh: document.getElementById('dailyKwh'),
                dailyCost: document.getElementById('dailyCost'),
                monthlyKwh: document.getElementById('monthlyKwh'),
                monthlyCost: document.getElementById('monthlyCost'),
                yearlyKwh: document.getElementById('yearlyKwh'),
                yearlyCost: document.getElementById('yearlyCost')
            };
            
            if (els.dailyKwh) els.dailyKwh.textContent = dailyKwh.toFixed(2);
            if (els.dailyCost) els.dailyCost.textContent = `‚Çπ${dailyCost.toFixed(2)}`;
            if (els.monthlyKwh) els.monthlyKwh.textContent = (dailyKwh * 30).toFixed(2);
            if (els.monthlyCost) els.monthlyCost.textContent = `‚Çπ${(dailyCost * 30).toFixed(2)}`;
            if (els.yearlyKwh) els.yearlyKwh.textContent = (dailyKwh * 365).toFixed(0);
            if (els.yearlyCost) els.yearlyCost.textContent = `‚Çπ${(dailyCost * 365).toFixed(2)}`;
        }

        function initializeLiveChart() {
            const canvas = document.getElementById('liveChart');
            if (!canvas) return;
            
            if (liveChart) liveChart.destroy();
            
            liveChart = new Chart(canvas.getContext('2d'), {
                type: 'line',
                data: {
                    labels: [],
                    datasets: Object.keys(APPLIANCES).map(id => ({
                        label: APPLIANCES[id].name,
                        data: [],
                        borderColor: APPLIANCES[id].color,
                        backgroundColor: APPLIANCES[id].color + '20',
                        borderWidth: 2,
                        tension: 0.4,
                        pointRadius: 0
                    }))
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { display: true, title: { display: true, text: 'Time' } },
                        y: { display: true, title: { display: true, text: 'Power (Watts)' }, beginAtZero: true }
                    },
                    plugins: {
                        legend: { display: true, position: 'top' },
                        tooltip: { mode: 'index', intersect: false }
                    }
                }
            });
        }

        function updateLiveChart() {
            if (!liveChart || !historicalData[Object.keys(APPLIANCES)[0]].length) return;
            
            const timestamps = historicalData[Object.keys(APPLIANCES)[0]].map(d => {
                const date = d.timestamp;
                return `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;
            });
            
            liveChart.data.labels = timestamps;
            Object.keys(APPLIANCES).forEach((id, index) => {
                liveChart.data.datasets[index].data = historicalData[id].map(d => d.value);
            });
            liveChart.update('none');
        }

        function initializeLiveMonitor() {
            console.log('Initializing Live Monitor...');
            initializeGauges();
            initializeLiveChart();
            updateReadings();
            
            if (updateInterval) clearInterval(updateInterval);
            updateInterval = setInterval(updateReadings, 3000);
        }

        // Cleanup on page change
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (link.getAttribute('data-page') !== 'monitor' && updateInterval) {
                    clearInterval(updateInterval);
                    updateInterval = null;
                }
            });
        });
    </script>
</body>
</html>
